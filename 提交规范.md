# 提交规范

为了保持代码提交历史的清晰和一致性，我们制定了以下提交规范。

## 提交消息格式

提交消息应遵循以下格式：

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 类型(Type)

- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式调整（不影响代码运行）
- `refactor`: 代码重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 范围(Scope)

范围应该是当前修改涉及的模块或文件，例如：`user-service`, `api`, `ui`等。

### 主题(Subject)

主题是对修改的简短描述，应遵循以下规则：
- 使用现在时态
- 首字母小写
- 不以句号结尾
- 不超过50个字符

### 正文(Body)

正文是对修改的详细描述，应包括修改的动机和与之前行为的对比。正文应：
- 使用现在时态
- 每行不超过72个字符

### 页脚(Footer)

页脚用于引用相关的issue或pull request，例如：`Fixes #123` 或 `Closes #456`

## 示例

### 简单提交

```
feat(user-service): 添加用户注册功能
```

### 完整提交

```
fix(api): 修复用户登录验证错误

在某些情况下，用户使用正确的凭据无法登录系统。
这是由于验证逻辑中的一个边界条件处理不当导致的。

此修复确保了所有输入都经过适当的验证和清理。

Fixes #789
```

## 提交检查

我们使用git hooks和CI来检查提交消息是否符合规范。不符合规范的提交将被拒绝。

## 工具推荐

### Commitizen

我们推荐使用Commitizen来帮助生成符合规范的提交消息：

```bash
npm install -g commitizen
npm install -g cz-conventional-changelog

# 在项目根目录运行
commitizen init cz-conventional-changelog --save --save-exact
```

然后使用以下命令提交：

```bash
git cz
```

### Husky和Commitlint

项目中已配置Husky和Commitlint来自动检查提交消息：

```bash
# 安装依赖
npm install --save-dev husky @commitlint/cli @commitlint/config-conventional

# 启用husky
npx husky install
```

## 最佳实践

1. 每次提交应该只解决一个问题
2. 提交应该尽可能小但完整
3. 避免"工作进行中"类型的提交
4. 使用有意义的提交消息
5. 定期推送提交到远程仓库