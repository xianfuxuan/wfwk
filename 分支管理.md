# 分支管理

本文档介绍了WFWK项目的分支管理策略，基于Git Flow模型。

## 分支类型

### 1. 主要分支

- `main`: 主分支，包含生产环境的稳定代码
- `develop`: 开发分支，包含最新的开发代码

### 2. 辅助分支

- `feature/*`: 功能分支，用于开发新功能
- `release/*`: 发布分支，用于准备新版本发布
- `hotfix/*`: 热修复分支，用于紧急修复生产环境问题

## 分支命名规范

```
feature/功能描述
release/v版本号
hotfix/问题描述
```

示例:
- `feature/user-authentication`
- `release/v1.2.0`
- `hotfix/login-error-fix`

## 工作流程

### 1. 开发新功能

1. 从`develop`分支创建功能分支:
   ```bash
   git checkout develop
   git pull origin develop
   git checkout -b feature/新功能名称
   ```

2. 在功能分支上进行开发

3. 完成功能后，合并回`develop`分支:
   ```bash
   git checkout develop
   git pull origin develop
   git merge --no-ff feature/新功能名称
   git push origin develop
   git branch -d feature/新功能名称
   ```

### 2. 准备发布

1. 从`develop`分支创建发布分支:
   ```bash
   git checkout develop
   git pull origin develop
   git checkout -b release/v版本号
   ```

2. 在发布分支上进行最后的测试和修复

3. 合并到`main`和`develop`分支:
   ```bash
   git checkout main
   git merge --no-ff release/v版本号
   git push origin main

   git checkout develop
   git merge --no-ff release/v版本号
   git push origin develop

   git branch -d release/v版本号
   ```

### 3. 紧急修复

1. 从`main`分支创建热修复分支:
   ```bash
   git checkout main
   git pull origin main
   git checkout -b hotfix/问题描述
   ```

2. 在热修复分支上进行修复

3. 合并到`main`和`develop`分支:
   ```bash
   git checkout main
   git merge --no-ff hotfix/问题描述
   git push origin main

   git checkout develop
   git merge --no-ff hotfix/问题描述
   git push origin develop

   git branch -d hotfix/问题描述
   ```

## 分支保护规则

为了确保代码质量，我们在GitHub上设置了以下分支保护规则：

1. `main`分支:
   - 禁止直接推送
   - 必须通过Pull Request合并
   - 至少需要一个代码审查批准
   - 必须通过所有CI检查

2. `develop`分支:
   - 禁止直接推送
   - 必须通过Pull Request合并
   - 至少需要一个代码审查批准

## 最佳实践

1. 保持分支简短: 功能分支应该尽快合并回`develop`
2. 经常同步: 定期从`develop`分支拉取最新代码
3. 清理分支: 合并后的分支应及时删除
4. 描述性命名: 分支名称应清晰描述其目的